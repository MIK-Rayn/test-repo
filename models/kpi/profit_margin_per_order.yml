version: 2

models:
  - name: profit_margin_per_order
    description: |
      Profit Margin per Order is a KPI that assesses the profitability of each order. It calculates the profit margin after subtracting all associated costs including fees, cost of goods sold, and shipping costs.
    columns:
      - name: order_id
        description: "Unique identifier for each order from the ORDER_HISTORY table."
      - name: total_value
        description: "The total monetary value of the order as recorded in the ORDER_HISTORY table."
      - name: fee_value
        description: "The fee amount associated with the order from the ORDER_HISTORY table."
      - name: profit_margin
        description: |
          The calculated profit margin per order. This is computed using the formula:
          
              TOTAL_VALUE - FEE_VALUE - (SUM of (cost_value + shipping_cost_value) from ORDERS_LINE_ITEM)
          
          This metric provides insight into the net profitability of an order after accounting for key costs.
